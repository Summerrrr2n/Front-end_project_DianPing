{"version":3,"sources":["containers/Search/components/SearchBox/index.js","containers/Search/components/SearchHistory/index.js","containers/Search/components/PopularSearch/index.js","containers/Search/index.js"],"names":["SearchBox","handleChange","e","_this","props","onChange","target","value","handleClear","onClear","handleCancer","onCancel","handleClickItem","item","onClickItem","_this$props","this","inputText","relatedKeywords","react_default","a","createElement","className","onClick","length","renderSuggestList","_this2","map","key","id","bind","keyword","quantity","Component","SearchHistory","handleClick","data","index","PopularSearch","Search","handleChangeInput","text","_this$props$searchAct","searchActions","setInputText","loadRelatedKeywords","handleClearInput","clearInputText","handleCancel","history","goBack","_this$props$searchAct2","addHistoryKeyword","loadRelatedShops","push","handleClearHistory","clearHistoryKeywords","popularKeywords","historyKeywords","SearchBox_SearchBox","PopularSearch_PopularSearch","SearchHistory_SearchHistory","loadPopularKeywords","connect","state","getRelatedKeywords","getInputText","getPopularKeywords","getHistoryKeywords","dispatch","bindActionCreators"],"mappings":"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","file":"static/js/9.f2117962.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport './style.css'\r\n\r\n\r\n\r\n\r\n\r\nexport default class SearchBox extends Component {\r\n\r\n    render() {\r\n        const { inputText, relatedKeywords } = this.props\r\n        return (\r\n            <div className='searchBox'>\r\n                <div className='searchBox__container'>\r\n                    <input className='searchBox__text' value={inputText} onChange={this.handleChange}></input>\r\n                    <span className='searchBox__clear' onClick={this.handleClear}></span>\r\n                    <span className='searchBox__cancel' onClick={this.handleCancer}>取消</span>\r\n                </div>\r\n                {relatedKeywords.length>0 ? this.renderSuggestList() : null }\r\n            </div>\r\n        )\r\n    }\r\n\r\n    renderSuggestList() {\r\n        return (\r\n            <ul>\r\n                {\r\n                    this.props.relatedKeywords.map(item => {\r\n                        return (\r\n                        <li key={item.id} className='searchBox__item' \r\n                        onClick={this.handleClickItem.bind(this,item)}>\r\n                            <span className='searchBox__itemKeyword'>{item.keyword}</span>\r\n                            <span className='searchBox__itemQuantity'>约{item.quantity}个</span>\r\n                        </li>\r\n                        )})\r\n                }\r\n            </ul>\r\n        )\r\n    }\r\n\r\n    handleChange = (e) =>{\r\n        this.props.onChange(e.target.value)\r\n    }\r\n\r\n    handleClear = () => {\r\n        this.props.onClear()\r\n    }\r\n\r\n    handleCancer = () => {\r\n        this.props.onCancel()\r\n    }\r\n\r\n    handleClickItem = (item) => {\r\n        this.props.onClickItem(item)\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport './style.css'\r\n\r\nexport default class SearchHistory extends Component {\r\n    \r\n    render() {\r\n        const {data} = this.props\r\n        return (\r\n            <div className='searchHistory'>\r\n                <div className='searchHistory__header'>搜索记录</div>\r\n                <ul className='searchHistory__list'>\r\n                    {\r\n                        data.map((item, index) =>{\r\n                            return <li className='searchHistory__item' key={item.id}\r\n                            onClick={this.handleClick.bind(this,item)}>{item.keyword}</li>\r\n                        })\r\n                    }\r\n                </ul>\r\n                <div className='searchHistory__clear' onClick={this.handleCancer}>清除搜索记录</div>\r\n            </div>\r\n        ) \r\n    }\r\n    handleClick = () => {\r\n        this.props.onClickItem()\r\n    }\r\n\r\n    handleCancer = () => {\r\n        this.props.onClear()\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport './style.css'\r\n\r\n\r\n\r\n\r\n\r\nexport default class PopularSearch extends Component {\r\n    render() {\r\n        const { data } = this.props\r\n        return (\r\n            <div className='popularSearch'>\r\n                {\r\n                data.map((item, index) => {\r\n                    return <span className='popularSearch__item' key={item.id}\r\n                    onClick={this.handleClick.bind(this, item)}>{item.keyword}</span>\r\n                })}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    handleClick = (item) => {\r\n        this.props.onClickItem(item)\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport SearchBox from './components/SearchBox'\r\nimport SearchHistory from './components/SearchHistory'\r\nimport PopularSearch from './components/PopularSearch'\r\nimport {actions as searchActions, getRelatedKeywords,\r\ngetPopularKeywords, getInputText, getHistoryKeywords }\r\n from '../../redux/modules/search'\r\nimport { bindActionCreators } from 'redux'\r\nimport { connect } from 'react-redux'\r\n\r\nclass Search extends Component {\r\n    render() {\r\n        const { inputText, relatedKeywords,\r\n            popularKeywords, historyKeywords } = this.props\r\n        return (\r\n            <div>\r\n                <SearchBox inputText={inputText} relatedKeywords={relatedKeywords} \r\n                onChange={this.handleChangeInput}\r\n                onClear={this.handleClearInput}\r\n                onCancel={this.handleCancel}\r\n                onClickItem={this.handleClickItem}/>\r\n                <PopularSearch data={popularKeywords}\r\n                onClickItem={this.handleClickItem}/>\r\n                <SearchHistory \r\n                    data= {historyKeywords} \r\n                    onClickItem = { this.handleClickItem}\r\n                    onClear = { this.handleClearHistory}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n    componentDidMount() {\r\n        const { loadPopularKeywords } = this.props.searchActions\r\n        loadPopularKeywords()\r\n    }\r\n\r\n    //搜索框文本发生变化\r\n    handleChangeInput = text => {\r\n        const { setInputText, loadRelatedKeywords } = this.props.searchActions\r\n        setInputText(text)\r\n        loadRelatedKeywords(text)\r\n    }\r\n\r\n    //取消搜索框文本\r\n    handleClearInput = () => {\r\n        const { clearInputText } = this.props.searchActions\r\n        clearInputText()\r\n    }\r\n\r\n    //取消搜索\r\n    handleCancel = () => {\r\n        this.handleClearInput()\r\n        this.props.history.goBack()\r\n    }\r\n\r\n    //处理点击关键词的逻辑\r\n    handleClickItem = (item) => {\r\n        const { setInputText, addHistoryKeyword, loadRelatedShops } = this.props.searchActions\r\n        setInputText(item.keyword)\r\n        addHistoryKeyword(item.id)\r\n        loadRelatedShops(item.id)\r\n        this.props.history.push('/search_result')\r\n    }\r\n\r\n    //清除历史记录\r\n    handleClearHistory = () => {\r\n        const { clearHistoryKeywords } = this.props.searchActions\r\n        clearHistoryKeywords()\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const { clearInputText } = this.props.searchActions\r\n        clearInputText()\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state, props) => {\r\n    return {\r\n        relatedKeywords: getRelatedKeywords(state),\r\n        inputText: getInputText(state),\r\n        popularKeywords: getPopularKeywords(state),\r\n        historyKeywords: getHistoryKeywords(state)\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        searchActions: bindActionCreators(searchActions, dispatch) \r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Search)"],"sourceRoot":""}