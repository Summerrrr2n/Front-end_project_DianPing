(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,function(e,t,n){"use strict";n.d(t,"g",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return d}),n.d(t,"b",function(){return f}),n.d(t,"h",function(){return p}),n.d(t,"d",function(){return E}),n.d(t,"f",function(){return h});var r=n(30),c=n(2),u=n(1),o=n(14);function i(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var a={name:"orders",id:"id"},s=2,d=3,f=4,l=10,p={DELETE_ORDER:"ORDERS/DELETE_ORDER",ADD_COMMENT:"ORDERS/ADD_COMMENT",ADD_ORDER:"ORDERS/ADD_ORDER"},E={deleteOrder:function(e){return{type:p.DELETE_ORDER,orderId:e}},addComment:function(e,t){return{type:p.ADD_COMMENT,orderId:e,commentId:t}},addOrder:function(e){var t="o-".concat(l++);return{type:p.ADD_ORDER,orderId:t,order:Object(u.a)({},e,{id:t})}}},O=Object(o.a)(a.name);t.e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===p.ADD_COMMENT)return console.log("state ",e),console.log(t.orderId),Object(u.a)({},e,Object(c.a)({},t.orderId,Object(u.a)({},e[t.orderId],{commentId:t.commentId})));if(t.type===p.ADD_ORDER)return Object(u.a)({},e,Object(c.a)({},t.orderId,t.order));if(t.type===p.DELETE_ORDER)return e[t.orderId],Object(r.a)(e,[t.orderId].map(i));return O(e,t)};var h=function(e){return e.entities.orders}},,,function(e,t,n){"use strict";var r=n(2),c=n(43),u=n(1),o=new Headers({Accept:"application/json","Content-Type":"application/json"});function i(e,t){return 200===t.status?t.json():(console.error("response failed. Url = ".concat(e)),Promise.reject({error:{message:"Request failed due to server error"}}))}n.d(t,"a",function(){return a});var a="FETCH DATA",s=(t.b=function(){return function(e){return function(t){var n=t[a];if("undefined"===typeof n)return e(t);var r=n.endpoint,o=n.schema,i=n.types;if("string"!==typeof r)throw new Error("endpoint\u5fc5\u987b\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\u7684URL");if(!o)throw new Error("\u5fc5\u987b\u6307\u5b9a\u9886\u57df\u5b9e\u4f53\u7684schema");if(!Array.isArray(i)&&3!==i.length)throw new Error("\u9700\u8981\u6307\u5b9a\u4e00\u4e2a\u5305\u542b\u4e863\u4e2aaction type\u7684\u6570\u7ec4");if(!i.every(function(e){return"string"===typeof e}))throw new Error("action type\u5fc5\u987b\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b");var d=function(e){var n=Object(u.a)({},t,e);return delete n[a],n},f=Object(c.a)(i,3),l=f[0],p=f[1],E=f[2];return e(d({type:l})),s(r,o).then(function(t){return e(d({type:p,response:t}))},function(t){return e(d({type:E,error:t.message||"\u83b7\u53d6\u6570\u636e\u5931\u8d25"}))})}}},function(e,t){return(n=e,fetch(n,{method:"GET",headers:o}).then(function(e){return i(n,e)}).catch(function(e){return console.error("response failed. Url = ".concat(n,". Message: ").concat(e)),Promise.reject({error:{message:"Request failed"}})})).then(function(e){return d(e,t)});var n}),d=function(e,t){var n,c=t.id,u=t.name,o={},i=[];return Array.isArray(e)?e.forEach(function(e){o[e[c]]=e,i.push(e[c])}):(o[e[c]]=e,i.push(e[c])),n={},Object(r.a)(n,u,o),Object(r.a)(n,"ids",i),n}},,function(e,t,n){"use strict";n.d(t,"d",function(){return c}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return i});var r=n(14),c={name:"products",id:"id"},u=Object(r.a)(c.name);t.a=u;var o=function(e,t){var n=e.entities.products[t];return n&&n.detail&&n.purchaseNotes?n:null},i=function(e,t){return e.entities.products[t]}},,,function(e,t,n){"use strict";t.a={getProductList:function(e,t,n){return"/mock/products/".concat(e,".json?rowIndex=").concat(t,"&pageSize=").concat(n)},getProductDetail:function(e){return"/mock/product_detail/".concat(e,".json")},getShopById:function(e){return"/mock/shops/".concat(e,".json")},getPopularKeywords:function(){return"/mock/keywords/popular.json"},getRelatedKeywords:function(e){return"/mock/keywords/related.json?keyword=".concat(e)},getRelatedShops:function(e){return"/mock/shops/related.json?keyword=".concat(e)},getOrders:function(){return"/mock/orders/orders.json"}}},function(e,t,n){"use strict";var r=n(1);t.a=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return n.response&&n.response[e]?Object(r.a)({},t,n.response[e]):t}}},function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"b",function(){return o});var r=n(14),c={name:"shops",id:"id"},u=Object(r.a)(c.name);t.a=u;var o=function(e,t){return e.entities.shops[t]}},function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"b",function(){return o});var r=n(14),c={name:"keywords",id:"id"},u=Object(r.a)(c.name);t.a=u;var o=function(e,t){return e.entities.keywords[t]}},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"d",function(){return O}),n.d(t,"c",function(){return h}),n.d(t,"e",function(){return b});var r=n(1),c={username:localStorage.getItem("username")||"",password:"",isFetching:"",status:localStorage.getItem("login")||!1},u="LOGIN/LOGIN_REQUEST",o="LOGIN/LOGIN_SUCCESS",i="LOGIN/LOGIN_FAILURE",a="LOGIN/LOGOUT",s="LOGIN/SET_USERNAME",d="LOGIN/SET_PASSWORD",f={login:function(){return function(e,t){var n=t().login,r=n.username,c=n.password;return r&&r.length>0&&c&&c.length>0?(e(E()),new Promise(function(t,n){setTimeout(function(){e(l()),localStorage.setItem("username",r),localStorage.setItem("login",!0),t()},1e3)})):e(p("\u7528\u6237\u540d\u548c\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01"))}},logout:function(){return localStorage.removeItem("username"),localStorage.removeItem("login"),{type:a}},setUsername:function(e){return{type:s,username:e}},setPassword:function(e){return{type:d,password:e}}},l=function(){return{type:o}},p=function(e){return{type:i,error:e}},E=function(){return{type:u}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(r.a)({},e,{isFetching:!0});case o:return Object(r.a)({},e,{isFetching:!1,status:!0});case i:return Object(r.a)({},e,{isFetching:!1});case a:return Object(r.a)({},e,{status:!1,username:"",password:""});case s:return Object(r.a)({},e,{username:t.username});case d:return Object(r.a)({},e,{password:t.password});default:return e}};var O=function(e){return e.login.username},h=function(e){return e.login.password},b=function(e){return e.login.status}},,,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(2),c=n(1),u=n(14),o="COMMENTS/ADD_COMMENT",i={addComment:function(e){return{type:o,comment:e}}},a=Object(u.a)("comments");t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===o?Object(c.a)({},e,Object(r.a)({},t.comment.id,t.comment)):a(e,t)}},,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return b}),n.d(t,"c",function(){return R}),n.d(t,"d",function(){return j});var r=n(1),c=n(2),u=n(6),o=n(13),i=n(8),a=n(15),s=n(10),d="DETAIL/FETCH_PRODUCT_DETAIL_REQUEST",f="DETAIL/FETCH_PRODUCT_DETAIL_SUCCES",l="DETAIL/FETCH_PRODUCT_DETAIL_FAILURE",p="DETAIL/FETCH_PRODUCT_DETAIL_REQUEST",E="DETAIL/FETCH_PRODUCT_DETAIL_SUCCES",O="DETAIL/FETCH_PRODUCT_DETAIL_FAILURE",h={product:{isFetching:!1,id:null},relatedShop:{isFetching:!1,id:null}},b={loadProductDetail:function(e){return function(t,n){if(Object(s.c)(n(),e))return t(S(e));var r=o.a.getProductDetail(e);return t(m(r,e))}},loadShopById:function(e){return function(t,n){if(Object(a.b)(n(),e))return t(v(e));var r=o.a.getShopById(e);return t(y(r,e))}}},m=function(e,t){var n;return n={},Object(c.a)(n,i.a,{types:[d,f,l],endpoint:e,schema:s.d}),Object(c.a)(n,"id",t),n},y=function(e,t){var n;return n={},Object(c.a)(n,i.a,{types:[p,E,O],endpoint:e,schema:a.c}),Object(c.a)(n,"id",t),n},S=function(e){return{type:f,id:e}},v=function(e){return{type:E,id:e}},g=Object(u.c)({product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.product,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(r.a)({},e,{isFetching:!0});case f:return Object(r.a)({},e,{id:t.id,isFetching:!1});case l:return Object(r.a)({},e,{isFetching:!1,id:null});default:return e}},relatedShop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.relatedShop,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(r.a)({},e,{isFetching:!0});case E:return Object(r.a)({},e,{id:t.id,isFetching:!1});case O:return Object(r.a)({},e,{isFetching:!1,id:null});default:return e}}});t.b=g;var R=function(e,t){return Object(s.c)(e,t)},j=function(e,t){var n=Object(s.b)(e,t),r=n?n.nearestShop:null;return r?Object(a.b)(e,r):null}},function(e,t,n){"use strict";n.d(t,"a",function(){return T}),n.d(t,"f",function(){return U}),n.d(t,"g",function(){return F}),n.d(t,"e",function(){return L}),n.d(t,"d",function(){return H}),n.d(t,"h",function(){return P}),n.d(t,"c",function(){return K});var r=n(44),c=n(1),u=n(2),o=n(13),i=n(8),a=n(16),s=n(6),d=n(15),f="SEARCH/FETCH_POPULAR_KEYWORDS_REQUEST",l="SEARCH/FETCH_POPULAR_KEYWORDS_SUCCESS",p="SEARCH/FETCH_POPULAR_KEYWORDS_FAILURE",E="SEARCH/FETCH_RELATED_KEYWORDS_REQUEST",O="SEARCH/FETCH_RELATED_KEYWORDS_SUCCESS",h="SEARCH/FETCH_RELATED_KEYWORDS_FAILURE",b="SEARCH/SET_INPUT_TEXT",m="SEARCH/CLEAR_INPUT_TEXT",y="SEARCH/ADD_HISTORY_KEYWORD",S="SEARCH/CLEAR_HISTORY_KEYWORDS",v="SEARCH/FETCH_SHOPS_REQUEST",g="SEARCH/FETCH_SHOPS_SUCCESS",R="SEARCH/FETCH_SHOPS_FAILURE",j={inputText:"",popularKeywords:{isFetching:!1,ids:[]},relatedKeywords:{},historyKeywords:[],searchedShopsByKeyword:{}},T={loadPopularKeywords:function(){return function(e,t){if(t().search.popularKeywords.ids.length>0)return null;var n=o.a.getPopularKeywords();return e(_(n))}},loadRelatedKeywords:function(e){return function(t,n){if(n().search.relatedKeywords[e])return null;var r=o.a.getRelatedKeywords(e);return t(C(e,r))}},loadRelatedShops:function(e){return function(t,n){var r=n().search.searchedShopsByKeyword;if(console.log(r),r[e])return null;var c=o.a.getRelatedShops(e);return t(D(e,c))}},setInputText:function(e){return{type:b,text:e}},clearInputText:function(){return{type:m}},addHistoryKeyword:function(e){return{type:y,text:e}},clearHistoryKeywords:function(){return{type:S}}},_=function(e){return Object(u.a)({},i.a,{types:[f,l,p],endpoint:e,schema:a.c})},C=function(e,t){var n;return n={},Object(u.a)(n,i.a,{types:[E,O,h],endpoint:t,schema:a.c}),Object(u.a)(n,"keyword",e),n},D=function(e,t){var n;return n={},Object(u.a)(n,i.a,{types:[v,g,R],endpoint:t,schema:d.c}),Object(u.a)(n,"text",e),n},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,ids:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(c.a)({},e,{isFetching:!0});case O:return Object(c.a)({},e,{isFetching:!1,ids:e.ids.concat(t.response.ids)});case h:return Object(c.a)({},e,{isFetching:!1});default:return e}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,ids:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(c.a)({},e,{isFetching:!0});case g:return Object(c.a)({},e,{isFetching:!1,ids:t.response.ids});case R:return Object(c.a)({},e,{isFetching:!1});default:return e}},A=Object(s.c)({historyKeywords:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.historyKeywords,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:var n=e.filter(function(e){return e!==t.text});return[t.text].concat(Object(r.a)(n));case S:return[];default:return e}},popularKeywords:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.popularKeywords,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(c.a)({},e,{isFetching:!0});case l:return Object(c.a)({},e,{isFetching:!1,ids:e.ids.concat(t.response.ids)});case h:return Object(c.a)({},e,{isFetching:!1});default:return e}},inputText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.inputText,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return t.text;case m:return"";default:return e}},relatedKeywords:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.relatedKeywords,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:case O:case h:return Object(c.a)({},e,Object(u.a)({},t.text,I(e[t.text],t)));default:return e}},searchedShopsByKeyword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.searchedShopsByKeyword,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:case g:case R:return Object(c.a)({},e,Object(u.a)({},t.text,w(e[t.text],t)));default:return e}}});t.b=A;var U=function(e){return e.search.popularKeywords.ids.map(function(t){return Object(a.b)(e,t)})},F=function(e){var t=e.search.inputText;if(!t||0===t.trim().length)return[];var n=e.search.relatedKeywords[t];return n?n.ids.map(function(t){return Object(a.b)(e,t)}):[]},L=function(e){return e.search.inputText},H=function(e){return e.search.historyKeywords.map(function(t){return Object(a.b)(e,t)})},P=function(e){var t=e.search.historyKeywords[0];if(!t)return[];var n=e.search.searchedShopsByKeyword[t];return console.log("shops",n),n.ids.map(function(t){return Object(d.b)(e,t)})},K=function(e){var t=e.search.historyKeywords[0];return t?Object(a.b)(e,t).keyword:""}},function(e,t,n){"use strict";n.d(t,"a",function(){return w}),n.d(t,"f",function(){return M}),n.d(t,"g",function(){return k}),n.d(t,"c",function(){return N}),n.d(t,"d",function(){return x}),n.d(t,"e",function(){return Q}),n.d(t,"h",function(){return G});var r,c=n(1),u=n(2),o=n(6),i=n(13),a=n(8),s=n(5),d=n(28),f=n(29),l=(r={},Object(u.a)(r,s.c,"toPayIds"),Object(u.a)(r,s.a,"availableIds"),Object(u.a)(r,s.b,"refundIds"),r),p={orders:{isFetching:!1,fetched:!1,ids:[],toPayIds:[],availableIds:[],refundIds:[]},currentTab:0,currentOrder:{id:null,isDeleting:!1,isCommenting:"",comment:"",stars:0}},E="USER/FETCH_ORDERS_REQUEST",O="USER/FETCH_ORDERS_SUCCESS",h="USER/FETCH_ORDERS_FAILURE",b="USER/SET_CURRENT_TAB",m="USER/DELETE_ORDERS_REQUEST",y="USER/DELETE_ORDERS_SUCCESS",S="USER/DELETE_ORDERS_FAILURE",v="USER/SHOW_DELETE_DIALOG",g="USER/HIDE_DELETE_DIALOG",R="USER/SHOW_COMMENT_AREA",j="USER/HIDE_COMMENT_AREA",T="USER/SET_COMMENT",_="USER/SET_STARS",C="USER/POST_COMMENT_REQUEST",D="USER/POST_COMMENT_SUCCESS",I="USER/POST_COMMENT_FAILURE",w={loadOrders:function(){return function(e,t){if(t().user.orders.fetched)return null;var n=i.a.getOrders();return e(F(n))}},setCurrentTab:function(e){return{type:b,index:e}},removeOrder:function(){return function(e,t){var n=t().user.currentOrder.id;n&&(e(A()),new Promise(function(t,r){setTimeout(function(){e(U(n)),e(s.d.deleteOrder(n)),t()},500)}))}},showDeleteDialog:function(e){return{type:v,orderId:e}},hideDeleteDialog:function(){return{type:g}},showCommentArea:function(e){return{type:R,orderId:e}},hideCommentArea:function(){return{type:j}},setComment:function(e){return{type:T,comment:e}},setStars:function(e){return{type:_,stars:e}},submitComment:function(){return function(e,t){return e(L()),new Promise(function(n,r){setTimeout(function(){var r=t().user.currentOrder,c=r.id,u=r.stars,o=r.comment,i={id:+new Date,stars:u,content:o};e(H()),e(d.a.addComment(i)),e(s.d.addComment(c,i.id)),n()},500)})}}},A=function(){return{type:m}},U=function(e){return{type:y,orderId:e}},F=function(e){return Object(u.a)({},a.a,{types:[E,O,h],endpoint:e,schema:s.g})},L=function(){return{type:C}},H=function(){return{type:D}},P=function(e,t,n){return e[t].filter(function(e){return e!==n})},K=Object(o.c)({currentTab:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.currentTab,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return t.index;default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.orders,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(c.a)({},e,{isFetching:!0});case O:var n=t.response.ids.filter(function(e){return t.response.orders[e].type===s.c}),r=t.response.ids.filter(function(e){return t.response.orders[e].type===s.a}),o=t.response.ids.filter(function(e){return t.response.orders[e].type===s.b});return Object(c.a)({},e,{isFetching:!1,ids:e.ids.concat(t.response.ids),toPayIds:e.toPayIds.concat(n),availableIds:e.ids.concat(r),refundIds:e.ids.concat(o),fetched:!0});case s.h.DELETE_ORDER:case y:return Object(c.a)({},e,{ids:P(e,"ids",t.orderId),toPayIds:P(e,"toPayIds",t.orderId),availableIds:P(e,"availableIds",t.orderId),refundIds:P(e,"refundIds",t.orderId)});case s.h.ADD_ORDER:var i=t.order,a=l[i.type];return a?Object(c.a)({},e,Object(u.a)({ids:[i.id].concat(e.ids)},a,[i.id].concat(e[a]))):Object(c.a)({},e,{ids:[i.id].concat(e.ids)});default:return e}},currentOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.currentOrder,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(c.a)({},e,{id:t.orderId,isDeleting:!0});case R:return Object(c.a)({},e,{id:t.orderId,isCommenting:!0});case g:case j:case y:case S:case D:case I:return p.currentOrder;case T:return Object(c.a)({},e,{comment:t.comment});case _:return Object(c.a)({},e,{stars:t.stars});default:return e}}});t.b=K;var M=function(e){return e.user.currentTab},k=function(e){return e.user.currentOrder&&e.user.currentOrder.isDeleting?e.user.currentOrder.id:null},N=function(e){return e.user.currentOrder&&e.user.currentOrder.isCommenting?e.user.currentOrder.id:null},x=function(e){return e.user.currentOrder?e.user.currentOrder.comment:""},Q=function(e){return e.user.currentOrder?e.user.currentOrder.stars:0},G=Object(f.a)([M,function(e){return e.user.orders},s.f],function(e,t,n){return t[["ids","toPayIds","availableIds","refundIds"][e]].map(function(e){return n[e]})})},,,function(e,t,n){"use strict";n.d(t,"a",function(){return S}),n.d(t,"d",function(){return j}),n.d(t,"e",function(){return T}),n.d(t,"c",function(){return _}),n.d(t,"f",function(){return C});var r=n(1),c=n(2),u=n(6),o=n(13),i=n(8),a=n(10),s="likes",d="discounts",f=5,l=3,p="HOME/FETCH_LIKES_REQUEST",E="HOME/FETCH_LIKES_SUCCESS",O="HOME/FETCH_LIKES_FAILURE",h="HOME/FETCH_DISCOUNTS_REQUEST",b="HOME/FETCH_DISCOUNTS_SUCCESS",m="HOME/FETCH_DISCOUNTS_FAILURE",y={likes:{isFetching:!1,pageCount:0,ids:[]},discounts:{isFetching:!1,ids:[]}},S={loadLikes:function(){return function(e,t){var n=t().home.likes.pageCount*f,r=o.a.getProductList(s,n,f);return e(v(r))}},loadDiscounts:function(){return function(e,t){if(t().home.discounts.ids.length>0)return null;var n=o.a.getProductList(d,0,l);return e(g(n))}}},v=function(e){return Object(c.a)({},i.a,{types:[p,E,O],endpoint:e,schema:a.d})},g=function(e){return Object(c.a)({},i.a,{types:[h,b,m],endpoint:e,schema:a.d})},R=Object(u.c)({discounts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.discounts,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(r.a)({},e,{isFetching:!0});case b:return Object(r.a)({},e,{isFetching:!1,ids:e.ids.concat(t.response.ids)});case m:return Object(r.a)({},e,{isFetching:!1});default:return e}},likes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.likes,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(r.a)({},e,{isFetching:!0});case E:return Object(r.a)({},e,{isFetching:!1,pageCount:e.pageCount+1,ids:e.ids.concat(t.response.ids)});case O:return Object(r.a)({},e,{isFetching:!1});default:return e}}});t.b=R;var j=function(e){return e.home.likes.ids.map(function(t){return e.entities.products[t]})},T=function(e){return e.home.likes.isFetching},_=function(e){return e.home.discounts.ids.map(function(t){return e.entities.products[t]})},C=function(e){return e.home.likes.pageCount}},function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"d",function(){return p}),n.d(t,"e",function(){return E}),n.d(t,"c",function(){return O}),n.d(t,"f",function(){return h});var r=n(1),c=n(10),u=n(5),o=n(29),i="PURCHASE/SET_ORDER_QUANTITY",a="PURCHASE/CLOSE_TIP",s="PURCHASE/SUBMIT_ORDER_REQUEST",d="PURCHASE/SUBMIT_ORDER_SUCCESS",f={quantity:1,showTip:!1},l={setOrderQuantity:function(e){return{type:i,quantity:e}},closeTip:function(){return{type:a}},submitOrder:function(e){return function(t,n){return t({type:s}),new Promise(function(r,o){setTimeout(function(){var r=Object(c.c)(n(),e),o=n().purchase.quantity,i=(r.currentPrice*o).toFixed(2),a="".concat(o,"\u5f20 | \u603b\u4ef7\uff1a").concat(i),s=r.validityPeriod,f={title:"".concat(r.shop," : ").concat(r.product),orderPicUrl:r.picture,channel:"\u56e2\u8d2d",statusText:"\u5f85\u6d88\u8d39",text:[a,s],type:u.a};t(u.d.addOrder(f)),t({type:d})},500)})}}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return Object(r.a)({},e,{quantity:t.quantity});case a:return Object(r.a)({},e,{showTip:!1});case d:return Object(r.a)({},e,{showTip:!0});default:return e}};var p=function(e){return e.purchase.quantity},E=function(e){return e.purchase.showTip},O=function(e,t){return Object(c.c)(e,t)},h=Object(o.a)([O,p],function(e,t){return e?(e.currentPrice*t).toFixed(2):0})},,,,,,function(e,t,n){e.exports=n(57)},,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),u=n(26),o=n.n(u),i=n(22),a=n(17),s=n(18),d=n(20),f=n(19),l=n(21),p=n(6),E=n(33),O=n(4),h=(n(54),function(e){function t(){return Object(a.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.msg;return c.a.createElement("div",{className:"errorToast"},c.a.createElement("div",{className:"errorToast_text"},e))}},{key:"componentDidMount",value:function(){var e=this;this.timer=setTimeout(function(){e.props.clearError()},1e4)}},{key:"componentWillUnmount",value:function(){this.timer&&clearTimeout(this.timer)}}]),t}(r.Component)),b=n(1),m={error:null},y="APP/CLEAR_ERROR",S={clearError:function(){return{type:y}}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.error;return n===y?Object(b.a)({},e,{error:null}):r?Object(b.a)({},e,{error:r}):e},g=function(e){return e.app.error};function R(e){return function(t){function n(e){var t;return Object(a.a)(this,n),(t=Object(d.a)(this,Object(f.a)(n).call(this,e))).state={component:null},t}return Object(l.a)(n,t),Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;e().then(function(e){t.setState({component:e.default})})}},{key:"render",value:function(){var e=this.state.component;return e?c.a.createElement(e,this.props):null}}]),n}(r.Component)}var j=n(30),T=n(25),_=function(e){function t(){return Object(a.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.component,n=e.login,r=Object(j.a)(e,["component","login"]);return c.a.createElement(O.b,Object.assign({},r,{render:function(e){return n?c.a.createElement(t,e):c.a.createElement(O.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}}]),t}(r.Component),C=Object(i.b)(function(e,t){return{login:Object(T.e)(e)}},null)(_),D=R(function(){return Promise.all([n.e(4),n.e(3)]).then(n.bind(null,110))}),I=R(function(){return n.e(5).then(n.bind(null,111))}),w=R(function(){return n.e(9).then(n.bind(null,114))}),A=R(function(){return n.e(6).then(n.bind(null,112))}),U=R(function(){return n.e(10).then(n.bind(null,115))}),F=R(function(){return n.e(7).then(n.bind(null,113))}),L=R(function(){return n.e(8).then(n.bind(null,116))}),H=function(e){function t(){return Object(a.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.error,n=e.appActions.clearError;return c.a.createElement("div",{className:"App"},c.a.createElement(E.a,null,c.a.createElement(O.d,null,c.a.createElement(O.b,{path:"/login",component:U}),c.a.createElement(C,{path:"/user",component:F}),c.a.createElement(O.b,{path:"/detail/:id",component:I}),c.a.createElement(O.b,{path:"/search",component:w}),c.a.createElement(O.b,{path:"/search_result",component:A}),c.a.createElement(C,{path:"/purchase/:id",component:L}),c.a.createElement(O.b,{path:"/",component:D}))),t?c.a.createElement(h,{msg:t,clearError:n}):null)}}]),t}(r.Component),P=Object(i.b)(function(e,t){return{error:g(e)}},function(e){return{appActions:Object(p.b)(S,e)}})(H),K=n(42),M=n(8),k=n(39),N=n(10),x=n(15),Q=n(5),G=n(28),B=n(16),W=Object(p.c)({products:N.a,shops:x.a,orders:Q.e,comments:G.b,keywords:B.a}),Y=n(34),q=n(35),J=n(36),X=n(40),z=Object(p.c)({app:v,home:k.b,entities:W,detail:Y.b,search:q.b,login:T.b,user:J.b,purchase:X.b}),V=Object(p.d)(z,Object(p.a)(K.a,M.b));n(56);o.a.render(c.a.createElement(i.a,{store:V},c.a.createElement(P,null)),document.getElementById("root"))}],[[46,1,2]]]);
//# sourceMappingURL=main.2d1e3d78.chunk.js.map