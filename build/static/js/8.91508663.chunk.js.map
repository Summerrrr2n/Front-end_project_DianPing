{"version":3,"sources":["containers/Purchase/components/PurchaseForm/index.js","components/Tip/index.js","containers/Purchase/index.js","components/Header/index.js"],"names":["PurchaseForm","handleDecrease","quantity","_this","props","onSetQuantity","Number","parseInt","handleIncrease","handleChange","e","target","value","handleClick","onSubmit","_this$props","this","product","currentPrice","phone","totalPrice","react_default","a","createElement","className","onClick","onChange","type","Component","Tip","message","onClose","Purchase","componentWillUnmount","purchaseActions","setOrderQuantity","handleBack","history","goBack","handleCloseTip","closeTip","handleSubmit","productId","match","params","id","submitOrder","handleSetQuantity","showTip","Header","title","onBack","PurchaseForm_PurchaseForm","Tip_Tip","detailActions","loadProductDetail","connect","state","getProduct","getQuantity","getTipStatus","getUsername","getTotalPrice","dispatch","bindActionCreators","grey","backgroundColor","react__WEBPACK_IMPORTED_MODULE_5___default","style"],"mappings":"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","file":"static/js/8.91508663.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport './style.css'\r\n\r\nexport default class PurchaseForm extends Component {\r\n    render() {\r\n        const { product: { currentPrice }, quantity, phone, totalPrice } = this.props\r\n        return (\r\n            <div className='purchaseForm'>\r\n                <div className='purchaseForm__wrapper'>\r\n                    <div className='purchaseForm__row1'>\r\n                        <div className='purchaseForm__rowLabel--1'>数量</div>\r\n                        <div className='purchaseForm__rowValue'>\r\n                            <span className='purchaseForm__counter--dec' \r\n                            onClick={this.handleDecrease}>-</span>\r\n                            <input className='purchaseForm__quantity' \r\n                            onChange={this.handleChange} \r\n                            value={quantity} type='number'/>\r\n                            <span className='purchaseForm__counter--inc' \r\n                            onClick={this.handleIncrease}>+</span>\r\n                        </div>\r\n                    </div>\r\n                    <div className='purchaseForm__row'>\r\n                        <div className='purchaseForm__rowLabel'>小计</div>\r\n                        <div className='purchaseForm__rowValue'>\r\n                            <span className='purchaseForm__totalPrice'>\r\n                               ¥{totalPrice}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div className='purchaseForm__row'>\r\n                        <div className='purchaseForm__rowLabel'>手机号码</div>\r\n                        <div className='purchaseForm__rowValue'>\r\n                        {phone}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <ul className='purchaseForm__remark'>\r\n                    <li className='purchaseForm__remarkItem'>\r\n                        <i className='purchaseForm__sign'></i>\r\n                        <span className='purchaseForm__decs'>支持随时退</span>\r\n                    </li>\r\n                    <li className='purchaseForm__remarkItem'>\r\n                        <i className='purchaseForm__sign'></i>\r\n                        <span className='purchaseForm__decs'>支持过期退</span>\r\n                    </li>\r\n                </ul>\r\n                <a className='purchaseForm__submit' \r\n                    onClick = {this.handleClick}>提交订单</a>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    handleDecrease = () => {\r\n        const{ quantity } = this.props\r\n        if (quantity > 0) {\r\n            this.props.onSetQuantity(Number.parseInt(quantity)-1)\r\n        }\r\n    }\r\n\r\n    handleIncrease = () => {\r\n        const{ quantity } = this.props\r\n        this.props.onSetQuantity(Number.parseInt(quantity)+1)\r\n    }\r\n\r\n    handleChange = (e) => {\r\n         const quantity = e.target.value\r\n         this.props.onSetQuantity(Number.parseInt(quantity))\r\n    }\r\n\r\n    handleClick = () => {\r\n        const { quantity } = this.props\r\n        if (quantity > 0) {\r\n            this.props.onSubmit()\r\n        }\r\n    }\r\n\r\n    \r\n}\r\n","import React, { Component } from 'react'\r\nimport './style.css'\r\n\r\nexport default class Tip extends Component {\r\n    render() {\r\n        const {message, onClose} = this.props\r\n        return (\r\n            <div className='tip'>\r\n                <div className='tip__alert'>\r\n                    <div className='tip__content'>\r\n                        {message}\r\n                    </div>\r\n                    <div className='tip__btns'>\r\n                        <a className='tip__btn' \r\n                        onClick ={onClose}>确定</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport Header from '../../components/Header'\r\nimport PurchaseForm from './components/PurchaseForm'\r\nimport Tip from '../../components/Tip'\r\nimport { connect } from 'react-redux'\r\nimport { actions as purchaseActions, getProduct, \r\n    getTipStatus, getQuantity, getTotalPrice} from '../../redux/modules/purchase'\r\nimport { getUsername } from '../../redux/modules/login'\r\nimport { bindActionCreators } from 'redux'\r\nimport {actions as detailActions} from '../../redux/modules/detail'\r\n\r\n\r\nclass Purchase extends Component {\r\n    render() {\r\n        const { product, phone, quantity, showTip, totalPrice }= this.props\r\n        return (\r\n            <div>\r\n                <Header title='下单' onBack={this.handleBack}/>\r\n                { product ? <PurchaseForm \r\n                product = {product} \r\n                phone={phone} \r\n                quantity={quantity} \r\n                totalPrice={totalPrice}\r\n                onSubmit = {this.handleSubmit}\r\n                onSetQuantity={this.handleSetQuantity}/> : null}\r\n                {showTip ? <Tip message='购买成功！' \r\n                onClose={this.handleCloseTip}/> : null }\r\n            </div>\r\n        )\r\n    }\r\n    componentDidMount() {\r\n        const { product }= this.props\r\n        if (!product) {\r\n            const productId = this.props.match.params.id\r\n            this.props.detailActions.loadProductDetail(productId)\r\n        }\r\n    }\r\n    componentWillUnmount = () => {\r\n        this.props.purchaseActions.setOrderQuantity(1)\r\n    }\r\n\r\n    handleBack = () => {\r\n        this.props.history.goBack()\r\n    }\r\n\r\n    handleCloseTip = () =>{\r\n        this.props.purchaseActions.closeTip()\r\n    }\r\n\r\n    handleSubmit = () => {\r\n        const productId = this.props.match.params.id\r\n        this.props.purchaseActions.submitOrder(productId)\r\n    }\r\n\r\n    handleSetQuantity = (quantity) => {\r\n        this.props.purchaseActions.setOrderQuantity(quantity)\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n    const productId = props.match.params.id\r\n    return {\r\n        product: getProduct(state,productId),\r\n        quantity: getQuantity(state),\r\n        showTip: getTipStatus(state),\r\n        phone: getUsername(state),\r\n        totalPrice: getTotalPrice(state,productId)\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        purchaseActions: bindActionCreators(purchaseActions, dispatch),\r\n        detailActions: bindActionCreators(detailActions, dispatch)\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Purchase)","import React, { Component } from 'react'\r\nimport './style.css'\r\n\r\nexport default class Header extends Component {\r\n    render() {\r\n        const { grey, title, onBack } = this.props;\r\n        const backgroundColor = grey ? '#f0f0f0' : '#fff' ;\r\n        return (\r\n            <header className='header' style={{'backgroundColor':backgroundColor}}>\r\n                <div className='header__back' onClick={onBack}>\r\n                    返回\r\n                </div>\r\n                <div className='header__title'>{title}</div>\r\n            </header>\r\n        )\r\n    }\r\n}\r\n"],"sourceRoot":""}